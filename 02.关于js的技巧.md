本篇文章谨记录平时工作中一些技巧与心得。

- [正则](#正则)

####正则

1. 手机号脱敏

   ```javascript
   '13733333333'.replace(/(\d{3})(\d{4})(\d+)/,'$1****$2')
   ```

2. 将富文本中的行内样式进行替换

   ```javascript
   //对字体大小适配
   export function formatSize(text) {
       if (!text) return ''
       return text.replace(/([^"]+?:)(\d+?)px/g, (m, m1, m2) => {
           if (m1 == 'font-size:') {
               m2 = Math.max(28, m2)
           } else if (m1 == 'line-height:') {
               m2 = Math.max(50, m2)
           }
           return m1 + (m2 / 75).toFixed(2) + 'rem'
       })
   }
   ```

3. 快速将url params装换为对象

   ```javascript
   location.search.match(/[^\?&]+/g).reduce((obj,str)=>{
   	const tmp=str.split('=')
   	obj[tmp[0]]=tmp[1]? decodeURIComponent(tmp[1]) :true
   	return obj
   },{})
   ```

4. 超过多少字节展示省略号，对汉字分开处理

5. ```javascript
   export function regxText(str, num) {
     //汉字
     const regx = /[\u4e00-\u9fa5]/
     let bytes = 0
     for (let i = 0; i < str.length; i++) {
       bytes += regx.test(str[i]) ? 2 : 1
       if (bytes > num) return str.slice(0, i) + '...'
     }
     return str
   }
   ```

